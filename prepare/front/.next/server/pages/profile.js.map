{"version":3,"file":"../pages/profile.js","mappings":"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","sources":["webpack://react-nodebird-front/external \"swr\"","webpack://react-nodebird-front/./components/NicknameEditForm.js","webpack://react-nodebird-front/./components/FollowList.js","webpack://react-nodebird-front/./pages/profile.js","webpack://react-nodebird-front/external \"@ant-design/icons\"","webpack://react-nodebird-front/external \"antd\"","webpack://react-nodebird-front/external \"axios\"","webpack://react-nodebird-front/external \"immer\"","webpack://react-nodebird-front/external \"next-redux-wrapper\"","webpack://react-nodebird-front/external \"next/dist/server/denormalize-page-path.js\"","webpack://react-nodebird-front/external \"next/dist/shared/lib/i18n/normalize-locale-path.js\"","webpack://react-nodebird-front/external \"next/dist/shared/lib/mitt.js\"","webpack://react-nodebird-front/external \"next/dist/shared/lib/router-context.js\"","webpack://react-nodebird-front/external \"next/dist/shared/lib/router/utils/get-asset-path-from-route.js\"","webpack://react-nodebird-front/external \"next/dist/shared/lib/router/utils/is-dynamic.js\"","webpack://react-nodebird-front/external \"next/dist/shared/lib/router/utils/parse-relative-url.js\"","webpack://react-nodebird-front/external \"next/dist/shared/lib/router/utils/querystring.js\"","webpack://react-nodebird-front/external \"next/dist/shared/lib/router/utils/route-matcher.js\"","webpack://react-nodebird-front/external \"next/dist/shared/lib/router/utils/route-regex.js\"","webpack://react-nodebird-front/external \"next/dist/shared/lib/utils.js\"","webpack://react-nodebird-front/external \"next/head\"","webpack://react-nodebird-front/external \"next/router\"","webpack://react-nodebird-front/external \"react\"","webpack://react-nodebird-front/external \"react-redux\"","webpack://react-nodebird-front/external \"react/jsx-runtime\"","webpack://react-nodebird-front/external \"redux\"","webpack://react-nodebird-front/external \"redux-devtools-extension\"","webpack://react-nodebird-front/external \"redux-saga\"","webpack://react-nodebird-front/external \"redux-saga/effects\"","webpack://react-nodebird-front/external \"styled-components\""],"sourcesContent":["const __WEBPACK_NAMESPACE_OBJECT__ = require(\"swr\");","import { Form, Input } from 'antd';\nimport React, { useCallback } from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\n\nimport useInput from '../hooks/useInput';\nimport { CHANGE_NICKNAME_REQUEST } from '../reducers/user';\n\nconst NicknameEditForm = () => {\n  const { me } = useSelector((state) => state.user);\n  const [nickname, onChangeNickname] = useInput(me?.nickname || '');\n  const dispatch = useDispatch();\n\n  const onSubmit = useCallback(() => {\n    dispatch({\n      type: CHANGE_NICKNAME_REQUEST,\n      data: nickname,\n    });\n  }, [nickname]);\n\n  return (\n    <Form style={{ marginBottom: '20px', border: '1px solid #d9d9d9', padding: '20px' }}>\n      <Input.Search\n        value={nickname}\n        onChange={onChangeNickname}\n        addonBefore=\"닉네임\"\n        enterButton=\"수정\"\n        onSearch={onSubmit}\n      />\n    </Form>\n  );\n};\n\nexport default NicknameEditForm;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { List, Button, Card } from 'antd';\nimport { StopTwoTone } from '@ant-design/icons';\nimport { useDispatch } from 'react-redux';\nimport { UNFOLLOW_REQUEST, REMOVE_FOLLOWER_REQUEST } from '../reducers/user';\n\nconst FollowList = ({ header, data, onClickMore, loading }) => {\n  const dispatch = useDispatch();\n\n  const onCancel = (id) => () => {\n    if (header === '팔로잉') {\n      dispatch({\n        type: UNFOLLOW_REQUEST,\n        data: id,\n      });\n    }\n    dispatch({\n      type: REMOVE_FOLLOWER_REQUEST,\n      data: id,\n    });\n  };\n\n  return (\n    <List\n      style={{ marginBottom: '20px' }}\n      grid={{ gutter: 4, xs: 2, md: 3 }}\n      size=\"small\"\n      header={<div>{header}</div>}\n      loadMore={\n        <div style={{ textAlign: 'center', margin: '10px 0' }}>\n          <Button onClick={onClickMore} loading={loading}>\n            더 보기\n          </Button>\n        </div>\n      }\n      bordered\n      dataSource={data}\n      renderItem={(item) => (\n        <List.Item style={{ marginTop: '20px' }}>\n          <Card actions={[<StopTwoTone key=\"stop\" onClick={onCancel(item.id)} />]}>\n            <Card.Meta description={item.nickname} />\n          </Card>\n        </List.Item>\n      )}\n    />\n  );\n};\n\nFollowList.propTypes = {\n  header: PropTypes.string.isRequired,\n  data: PropTypes.array.isRequired,\n  onClickMore: PropTypes.func.isRequired,\n  loading: PropTypes.bool.isRequired,\n};\n\nexport default FollowList;\n","import React, { useCallback, useEffect, useState } from 'react';\nimport Head from 'next/head';\nimport { useSelector } from 'react-redux';\nimport axios from 'axios';\nimport { END } from 'redux-saga';\nimport useSWR from 'swr';\n\nimport Router from 'next/router';\nimport AppLayout from '../components/AppLayout';\nimport NicknameEditForm from '../components/NicknameEditForm';\nimport FollowList from '../components/FollowList';\nimport wrapper from '../store/configureStore';\n\nimport { LOAD_MY_INFO_REQUEST } from '../reducers/user';\nimport { backUrl } from '../config/config';\n\nconst fetcher = (url) => axios.get(url, { withCredentials: true }).then((result) => result.data);\nconst Profile = () => {\n  // const dispatch = useDispatch();\n  const [followersLimit, setFollowersLimit] = useState(3);\n  const [followingsLimit, setFollowingsLimit] = useState(3);\n\n  const { me } = useSelector((state) => state.user);\n\n  const { data: followingsData, error: followingError } = useSWR(\n    `${backUrl}/user/followings?limit=${followersLimit}`,\n    fetcher,\n  );\n\n  const { data: followersData, error: followerError } = useSWR(\n    `${backUrl}/user/followers?limit=${followingsLimit}`,\n    fetcher,\n  );\n\n  // useEffect(() => {\n  //   dispatch({\n  //     type: LOAD_FOLLOWERS_REQUEST,\n  //   });\n  //   dispatch({\n  //     type: LOAD_FOLLOWINGS_REQUEST,\n  //   });\n  // }, []);\n\n  useEffect(() => {\n    if (!(me && me.id)) {\n      Router.push('/');\n    }\n  }, [me && me.id]);\n\n  const loadMortFollowings = useCallback(() => {\n    setFollowingsLimit((prev) => prev + 3);\n  }, []);\n\n  const loadMortFollowers = useCallback(() => {\n    setFollowersLimit((prev) => prev + 3);\n  }, []);\n\n  if (!me) {\n    return '내정보 로딩중...';\n  }\n\n  if (followerError || followingError) {\n    console.error(followerError || followingError);\n    return <div>팔로일 || 팔로워 중 에러 발생</div>;\n  }\n\n  return (\n    <>\n      <Head>\n        <meta charSet=\"utf-8\" />\n        <title>내 프로필 | NodeBird</title>\n      </Head>\n      <AppLayout>\n        <NicknameEditForm />\n        <FollowList\n          header=\"팔로잉 목록\"\n          data={followingsData}\n          onClickMore={loadMortFollowings}\n          loading={!followingError && !followingsData}\n        />\n        <FollowList\n          header=\"팔로워 목록\"\n          data={followersData}\n          onClickMore={loadMortFollowers}\n          loading={!followerError && !followersData}\n        />\n      </AppLayout>\n    </>\n  );\n};\n\nexport const getServerSideProps = wrapper.getServerSideProps((store) => async ({ req }) => {\n  // 로그인이 풀리는 현상, 서버에서 공유하지 않는 쿠키만들기\n  const cookie = req ? req.headers.cookie : '';\n  axios.defaults.headers.Cookie = '';\n  if (req && cookie) {\n    axios.defaults.headers.Cookie = cookie;\n  }\n  store.dispatch({\n    type: LOAD_MY_INFO_REQUEST,\n  });\n  store.dispatch(END);\n  await store.sagaTask.toPromise();\n});\n\nexport default Profile;\n","module.exports = require(\"@ant-design/icons\");","module.exports = require(\"antd\");","module.exports = require(\"axios\");","module.exports = require(\"immer\");","module.exports = require(\"next-redux-wrapper\");","module.exports = require(\"next/dist/server/denormalize-page-path.js\");","module.exports = require(\"next/dist/shared/lib/i18n/normalize-locale-path.js\");","module.exports = require(\"next/dist/shared/lib/mitt.js\");","module.exports = require(\"next/dist/shared/lib/router-context.js\");","module.exports = require(\"next/dist/shared/lib/router/utils/get-asset-path-from-route.js\");","module.exports = require(\"next/dist/shared/lib/router/utils/is-dynamic.js\");","module.exports = require(\"next/dist/shared/lib/router/utils/parse-relative-url.js\");","module.exports = require(\"next/dist/shared/lib/router/utils/querystring.js\");","module.exports = require(\"next/dist/shared/lib/router/utils/route-matcher.js\");","module.exports = require(\"next/dist/shared/lib/router/utils/route-regex.js\");","module.exports = require(\"next/dist/shared/lib/utils.js\");","module.exports = require(\"next/head\");","module.exports = require(\"next/router\");","module.exports = require(\"react\");","module.exports = require(\"react-redux\");","module.exports = require(\"react/jsx-runtime\");","module.exports = require(\"redux\");","module.exports = require(\"redux-devtools-extension\");","module.exports = require(\"redux-saga\");","module.exports = require(\"redux-saga/effects\");","module.exports = require(\"styled-components\");"],"names":["Form","Input","React","useCallback","useSelector","useDispatch","useInput","CHANGE_NICKNAME_REQUEST","NicknameEditForm","me","state","user","nickname","onChangeNickname","dispatch","onSubmit","type","data","marginBottom","border","padding","List","Button","Card","StopTwoTone","UNFOLLOW_REQUEST","REMOVE_FOLLOWER_REQUEST","FollowList","header","onClickMore","loading","onCancel","id","gutter","xs","md","textAlign","margin","item","marginTop","useEffect","useState","Head","axios","END","useSWR","Router","AppLayout","wrapper","LOAD_MY_INFO_REQUEST","backUrl","fetcher","url","get","withCredentials","then","result","Profile","followersLimit","setFollowersLimit","followingsLimit","setFollowingsLimit","followingsData","error","followingError","followersData","followerError","push","loadMortFollowings","prev","loadMortFollowers","console","getServerSideProps","store","req","cookie","headers","defaults","Cookie","sagaTask","toPromise"],"sourceRoot":""}