{"version":3,"file":"../pages/signup.js","mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;CAEA;;;;;AAEA,MAAMoB,YAAY,GAAGR,uEAAH;AAAA;AAAA;AAAA,kBAAlB;;AAIA,MAAMU,MAAM,GAAG,MAAM;AACnB,QAAMC,QAAQ,GAAGV,wDAAW,EAA5B;AACA,QAAM;AAAEW,IAAAA,aAAF;AAAiBC,IAAAA,UAAjB;AAA6BC,IAAAA,WAA7B;AAA0CC,IAAAA;AAA1C,MAAiDb,wDAAW,CAAEc,KAAD,IAAWA,KAAK,CAACC,IAAlB,CAAlE;AAEA1B,EAAAA,gDAAS,CAAC,MAAM;AACd,QAAIwB,EAAE,IAAIA,EAAE,CAACG,EAAb,EAAiB;AACfrB,MAAAA,0DAAA,CAAe,GAAf;AACD;AACF,GAJQ,EAIN,CAACkB,EAAE,IAAIA,EAAE,CAACG,EAAV,CAJM,CAAT;AAMA3B,EAAAA,gDAAS,CAAC,MAAM;AACd,QAAIsB,UAAJ,EAAgB;AACdhB,MAAAA,0DAAA,CAAe,GAAf;AACD;AACF,GAJQ,EAIN,CAACgB,UAAD,CAJM,CAAT;AAMAtB,EAAAA,gDAAS,CAAC,MAAM;AACd,QAAIuB,WAAJ,EAAiB;AACfM,MAAAA,KAAK,CAACN,WAAD,CAAL;AACD;AACF,GAJQ,EAIN,CAACA,WAAD,CAJM,CAAT;AAMA,QAAM,CAACO,KAAD,EAAQC,aAAR,IAAyBlB,iEAAQ,CAAC,EAAD,CAAvC;AACA,QAAM,CAACmB,QAAD,EAAWC,gBAAX,IAA+BpB,iEAAQ,CAAC,EAAD,CAA7C;AACA,QAAM,CAACqB,QAAD,EAAWC,gBAAX,IAA+BtB,iEAAQ,CAAC,EAAD,CAA7C;AAEA,QAAM;AAAA,OAACuB,aAAD;AAAA,OAAgBC;AAAhB,MAAoCtC,+CAAQ,CAAC,EAAD,CAAlD;AACA,QAAM;AAAA,OAACuC,aAAD;AAAA,OAAgBC;AAAhB,MAAoCxC,+CAAQ,CAAC,KAAD,CAAlD;AACA,QAAMyC,qBAAqB,GAAG1C,kDAAW,CACtC2C,CAAD,IAAO;AACLJ,IAAAA,gBAAgB,CAACI,CAAC,CAACC,MAAF,CAASC,KAAV,CAAhB;AACAJ,IAAAA,gBAAgB,CAACE,CAAC,CAACC,MAAF,CAASC,KAAT,KAAmBT,QAApB,CAAhB;AACD,GAJsC,EAKvC,CAACA,QAAD,CALuC,CAAzC;AAQA,QAAM;AAAA,OAACU,IAAD;AAAA,OAAOC;AAAP,MAAkB9C,+CAAQ,CAAC,EAAD,CAAhC;AACA,QAAM;AAAA,OAAC+C,SAAD;AAAA,OAAYC;AAAZ,MAA4BhD,+CAAQ,CAAC,KAAD,CAA1C;AACA,QAAMiD,YAAY,GAAGlD,kDAAW,CAAE2C,CAAD,IAAO;AACtCI,IAAAA,OAAO,CAACJ,CAAC,CAACC,MAAF,CAASO,OAAV,CAAP;AACAF,IAAAA,YAAY,CAAC,KAAD,CAAZ;AACD,GAH+B,EAG7B,EAH6B,CAAhC,CAtCmB,CA2CnB;;AACA,QAAMG,QAAQ,GAAGpD,kDAAW,CAAC,MAAM;AACjC,QAAIoC,QAAQ,KAAKE,aAAjB,EAAgC;AAC9B,aAAOG,gBAAgB,CAAC,IAAD,CAAvB;AACD;;AACD,QAAI,CAACK,IAAL,EAAW;AACT,aAAOG,YAAY,CAAC,IAAD,CAAnB;AACD;;AACDI,IAAAA,OAAO,CAACC,GAAR,CAAYtB,KAAZ,EAAmBI,QAAnB,EAA6BF,QAA7B;AACAZ,IAAAA,QAAQ,CAAC;AACPiC,MAAAA,IAAI,EAAEvC,sEADC;AAEPwC,MAAAA,IAAI,EAAE;AAAExB,QAAAA,KAAF;AAASI,QAAAA,QAAT;AAAmBF,QAAAA;AAAnB;AAFC,KAAD,CAAR;AAID,GAZ2B,EAYzB,CAACE,QAAD,EAAWE,aAAX,EAA0BQ,IAA1B,CAZyB,CAA5B;AAcA,sBACE;AAAA,2BACE,yDAAC,mEAAD;AAAA,8BACE,yDAAC,kDAAD;AAAA,gCACE;AAAM,iBAAO,EAAC;AAAd,UADF,eAEE;AAAA;AAAA,UAFF;AAAA,QADF,eAKE,yDAAC,sCAAD;AAAM,gBAAQ,EAAEM,QAAhB;AAAA,gCACE;AAAA,kCACE;AAAO,mBAAO,EAAC,YAAf;AAAA;AAAA,YADF,eAEE,6DAFF,eAGE,oDAAC,uCAAD;AAAO,gBAAI,EAAC,YAAZ;AAAyB,gBAAI,EAAC,OAA9B;AAAsC,iBAAK,EAAEpB,KAA7C;AAAoD,oBAAQ,EAAEC,aAA9D;AAA6E,oBAAQ;AAArF,YAHF;AAAA,UADF,eAOE;AAAA,kCACE;AAAO,mBAAO,EAAC,eAAf;AAAA;AAAA,YADF,eAEE,6DAFF,eAGE,oDAAC,uCAAD;AAAO,gBAAI,EAAC,WAAZ;AAAwB,iBAAK,EAAEC,QAA/B;AAAyC,oBAAQ,EAAEC,gBAAnD;AAAqE,oBAAQ;AAA7E,YAHF;AAAA,UAPF,eAaE;AAAA,kCACE;AAAO,mBAAO,EAAC,eAAf;AAAA;AAAA,YADF,eAEE,6DAFF,eAGE,oDAAC,uCAAD;AACE,gBAAI,EAAC,eADP;AAEE,gBAAI,EAAC,UAFP;AAGE,iBAAK,EAAEC,QAHT;AAIE,oBAAQ,EAAEC,gBAJZ;AAKE,oBAAQ;AALV,YAHF;AAAA,UAbF,eAyBE;AAAA,kCACE;AAAO,mBAAO,EAAC,qBAAf;AAAA;AAAA,YADF,eAEE,6DAFF,eAGE,oDAAC,uCAAD;AACE,gBAAI,EAAC,qBADP;AAEE,gBAAI,EAAC,UAFP;AAGE,iBAAK,EAAEC,aAHT;AAIE,oBAAQ,MAJV;AAKE,oBAAQ,EAAEI;AALZ,YAHF,EAUGF,aAAa,iBAAI,oDAAC,YAAD;AAAA;AAAA,YAVpB;AAAA,UAzBF,eAsCE;AAAA,kCACE,oDAAC,0CAAD;AAAU,gBAAI,EAAC,WAAf;AAA2B,mBAAO,EAAEM,IAApC;AAA0C,oBAAQ,EAAEI,YAApD;AAAA;AAAA,YADF,EAIGF,SAAS,iBAAI,oDAAC,YAAD;AAAA;AAAA,YAJhB;AAAA,UAtCF,eA6CE;AAAK,eAAK,EAAE;AAAES,YAAAA,SAAS,EAAE;AAAb,WAAZ;AAAA,iCACE,oDAAC,wCAAD;AAAQ,gBAAI,EAAC,SAAb;AAAuB,oBAAQ,EAAC,QAAhC;AAAyC,mBAAO,EAAElC,aAAlD;AAAA;AAAA;AADF,UA7CF;AAAA,QALF;AAAA;AADF,IADF;AA6DD,CAvHD;;AAyHO,MAAMmC,kBAAkB,GAAGxC,0GAAA,CAA4ByC,KAAD,IAAW,OAAO;AAAEC,EAAAA;AAAF,CAAP,KAAmB;AACzF;AACA,QAAMC,MAAM,GAAGD,GAAG,GAAGA,GAAG,CAACE,OAAJ,CAAYD,MAAf,GAAwB,EAA1C;AACApD,EAAAA,sEAAA,GAAgC,EAAhC;;AACA,MAAImD,GAAG,IAAIC,MAAX,EAAmB;AACjBpD,IAAAA,sEAAA,GAAgCoD,MAAhC;AACD;;AACDF,EAAAA,KAAK,CAACrC,QAAN,CAAe;AACbiC,IAAAA,IAAI,EAAEtC,2EAAoBA;AADb,GAAf;AAGA0C,EAAAA,KAAK,CAACrC,QAAN,CAAeZ,2CAAf;AACA,QAAMiD,KAAK,CAACM,QAAN,CAAeC,SAAf,EAAN;AACD,CAZiC,CAA3B;AAcP,iEAAe7C,MAAf;;;;;;;AC3JA;;;;;;;ACAA;;;;;;;ACAA;;;;;;;ACAA;;;;;;;ACAA;;;;;;;ACAA;;;;;;;ACAA;;;;;;;ACAA;;;;;;;ACAA;;;;;;;ACAA;;;;;;;ACAA;;;;;;;ACAA;;;;;;;ACAA;;;;;;;ACAA;;;;;;;ACAA;;;;;;;ACAA;;;;;;;ACAA;;;;;;;ACAA;;;;;;;ACAA;;;;;;;ACAA;;;;;;;ACAA;;;;;;;ACAA;;;;;;;ACAA;;;;;;;ACAA;;;;;;;ACAA","sources":["webpack://react-nodebird-front/./pages/signup.js","webpack://react-nodebird-front/external \"antd\"","webpack://react-nodebird-front/external \"axios\"","webpack://react-nodebird-front/external \"immer\"","webpack://react-nodebird-front/external \"next-redux-wrapper\"","webpack://react-nodebird-front/external \"next/dist/server/denormalize-page-path.js\"","webpack://react-nodebird-front/external \"next/dist/shared/lib/i18n/normalize-locale-path.js\"","webpack://react-nodebird-front/external \"next/dist/shared/lib/mitt.js\"","webpack://react-nodebird-front/external \"next/dist/shared/lib/router-context.js\"","webpack://react-nodebird-front/external \"next/dist/shared/lib/router/utils/get-asset-path-from-route.js\"","webpack://react-nodebird-front/external \"next/dist/shared/lib/router/utils/is-dynamic.js\"","webpack://react-nodebird-front/external \"next/dist/shared/lib/router/utils/parse-relative-url.js\"","webpack://react-nodebird-front/external \"next/dist/shared/lib/router/utils/querystring.js\"","webpack://react-nodebird-front/external \"next/dist/shared/lib/router/utils/route-matcher.js\"","webpack://react-nodebird-front/external \"next/dist/shared/lib/router/utils/route-regex.js\"","webpack://react-nodebird-front/external \"next/dist/shared/lib/utils.js\"","webpack://react-nodebird-front/external \"next/head\"","webpack://react-nodebird-front/external \"next/router\"","webpack://react-nodebird-front/external \"react\"","webpack://react-nodebird-front/external \"react-redux\"","webpack://react-nodebird-front/external \"react/jsx-runtime\"","webpack://react-nodebird-front/external \"redux\"","webpack://react-nodebird-front/external \"redux-devtools-extension\"","webpack://react-nodebird-front/external \"redux-saga\"","webpack://react-nodebird-front/external \"redux-saga/effects\"","webpack://react-nodebird-front/external \"styled-components\""],"sourcesContent":["/* eslint-disable no-alert */\nimport React, { useCallback, useState, useEffect } from 'react';\nimport Head from 'next/head';\nimport { Checkbox, Form, Input, Button } from 'antd';\nimport Router from 'next/router';\nimport axios from 'axios';\nimport { END } from 'redux-saga';\n\nimport styled from 'styled-components';\nimport { useDispatch, useSelector } from 'react-redux';\nimport AppLayout from '../components/AppLayout';\nimport useInput from '../hooks/useInput';\nimport { SIGN_UP_REQUEST, LOAD_MY_INFO_REQUEST } from '../reducers/user';\nimport wrapper from '../store/configureStore';\n// import Password from 'antd/lib/input/Password';\n\nconst ErrorMessage = styled.div`\n  color: red;\n`;\n\nconst Signup = () => {\n  const dispatch = useDispatch();\n  const { signUpLoading, signUpDone, signUpError, me } = useSelector((state) => state.user);\n\n  useEffect(() => {\n    if (me && me.id) {\n      Router.replace('/');\n    }\n  }, [me && me.id]);\n\n  useEffect(() => {\n    if (signUpDone) {\n      Router.replace('/');\n    }\n  }, [signUpDone]);\n\n  useEffect(() => {\n    if (signUpError) {\n      alert(signUpError);\n    }\n  }, [signUpError]);\n\n  const [email, onchangeEmail] = useInput('');\n  const [nickname, onchangeNickname] = useInput('');\n  const [password, onchangePassword] = useInput('');\n\n  const [passwordCheck, setPasswordCheck] = useState('');\n  const [passwordError, setPasswordError] = useState(false);\n  const onChangePasswordCheck = useCallback(\n    (e) => {\n      setPasswordCheck(e.target.value);\n      setPasswordError(e.target.value !== password);\n    },\n    [password],\n  );\n\n  const [term, setTerm] = useState('');\n  const [termError, setTermError] = useState(false);\n  const onChangeTerm = useCallback((e) => {\n    setTerm(e.target.checked);\n    setTermError(false);\n  }, []);\n\n  // eslint-disable-next-line consistent-return\n  const onSubmit = useCallback(() => {\n    if (password !== passwordCheck) {\n      return setPasswordError(true);\n    }\n    if (!term) {\n      return setTermError(true);\n    }\n    console.log(email, password, nickname);\n    dispatch({\n      type: SIGN_UP_REQUEST,\n      data: { email, password, nickname },\n    });\n  }, [password, passwordCheck, term]);\n\n  return (\n    <>\n      <AppLayout>\n        <Head>\n          <meta charSet=\"utf-8\" />\n          <title>회원가입 | NodeBird </title>\n        </Head>\n        <Form onFinish={onSubmit}>\n          <div>\n            <label htmlFor=\"user-email\">이메일</label>\n            <br />\n            <Input name=\"user-email\" type=\"email\" value={email} onChange={onchangeEmail} required />\n          </div>\n\n          <div>\n            <label htmlFor=\"user-nickname\">닉네임</label>\n            <br />\n            <Input name=\"user-nick\" value={nickname} onChange={onchangeNickname} required />\n          </div>\n\n          <div>\n            <label htmlFor=\"user-password\">패스워드</label>\n            <br />\n            <Input\n              name=\"user-password\"\n              type=\"password\"\n              value={password}\n              onChange={onchangePassword}\n              required\n            />\n          </div>\n\n          <div>\n            <label htmlFor=\"user-password-check\">비밀번호체크</label>\n            <br />\n            <Input\n              name=\"user-password-check\"\n              type=\"password\"\n              value={passwordCheck}\n              required\n              onChange={onChangePasswordCheck}\n            />\n            {passwordError && <ErrorMessage>비밀번호가 일치하지 않습니다</ErrorMessage>}\n          </div>\n\n          <div>\n            <Checkbox name=\"uset-term\" checked={term} onChange={onChangeTerm}>\n              약관에 동의 하십니까?\n            </Checkbox>\n            {termError && <ErrorMessage>약관에 동의 하셔야합니다</ErrorMessage>}\n          </div>\n\n          <div style={{ marginTop: 10 }}>\n            <Button type=\"primary\" htmlType=\"submit\" loading={signUpLoading}>\n              가입하기\n            </Button>\n          </div>\n        </Form>\n      </AppLayout>\n    </>\n  );\n};\n\nexport const getServerSideProps = wrapper.getServerSideProps((store) => async ({ req }) => {\n  // 로그인이 풀리는 현상, 서버에서 공유하지 않는 쿠키만들기\n  const cookie = req ? req.headers.cookie : '';\n  axios.defaults.headers.Cookie = '';\n  if (req && cookie) {\n    axios.defaults.headers.Cookie = cookie;\n  }\n  store.dispatch({\n    type: LOAD_MY_INFO_REQUEST,\n  });\n  store.dispatch(END);\n  await store.sagaTask.toPromise();\n});\n\nexport default Signup;\n","module.exports = require(\"antd\");","module.exports = require(\"axios\");","module.exports = require(\"immer\");","module.exports = require(\"next-redux-wrapper\");","module.exports = require(\"next/dist/server/denormalize-page-path.js\");","module.exports = require(\"next/dist/shared/lib/i18n/normalize-locale-path.js\");","module.exports = require(\"next/dist/shared/lib/mitt.js\");","module.exports = require(\"next/dist/shared/lib/router-context.js\");","module.exports = require(\"next/dist/shared/lib/router/utils/get-asset-path-from-route.js\");","module.exports = require(\"next/dist/shared/lib/router/utils/is-dynamic.js\");","module.exports = require(\"next/dist/shared/lib/router/utils/parse-relative-url.js\");","module.exports = require(\"next/dist/shared/lib/router/utils/querystring.js\");","module.exports = require(\"next/dist/shared/lib/router/utils/route-matcher.js\");","module.exports = require(\"next/dist/shared/lib/router/utils/route-regex.js\");","module.exports = require(\"next/dist/shared/lib/utils.js\");","module.exports = require(\"next/head\");","module.exports = require(\"next/router\");","module.exports = require(\"react\");","module.exports = require(\"react-redux\");","module.exports = require(\"react/jsx-runtime\");","module.exports = require(\"redux\");","module.exports = require(\"redux-devtools-extension\");","module.exports = require(\"redux-saga\");","module.exports = require(\"redux-saga/effects\");","module.exports = require(\"styled-components\");"],"names":["React","useCallback","useState","useEffect","Head","Checkbox","Form","Input","Button","Router","axios","END","styled","useDispatch","useSelector","AppLayout","useInput","SIGN_UP_REQUEST","LOAD_MY_INFO_REQUEST","wrapper","ErrorMessage","div","Signup","dispatch","signUpLoading","signUpDone","signUpError","me","state","user","id","replace","alert","email","onchangeEmail","nickname","onchangeNickname","password","onchangePassword","passwordCheck","setPasswordCheck","passwordError","setPasswordError","onChangePasswordCheck","e","target","value","term","setTerm","termError","setTermError","onChangeTerm","checked","onSubmit","console","log","type","data","marginTop","getServerSideProps","store","req","cookie","headers","defaults","Cookie","sagaTask","toPromise"],"sourceRoot":""}